{% extends 'base.html' %}
{% block content %}

<h1 class="text-center">{{ persona.apellido }}, {{ persona.nombre }}</h1>

{% if messages %}
	{% for message in messages %}
		<div class="alert alert-warning" role="alert">
			{% if message.tags %}{{ message.tags }}: {% endif %}{{ message }}
		</div>
	{% endfor %}
{% endif %}

<div class="d-flex flex-column mb-3 padre align-items-center">

	<div class="d-flex flex-row bd-highlight mb-3 botones justify-content-around">
		<button type="button" class="btn btn-outline-primary" id="cambiar">Cambiar datos</button>
		<form method="POST" action="/perfil/{{persona.id}}/activo" id="">
			{% csrf_token %}
			<button type="submit" class="btn btn-{% if persona.activo %}outline-secondary{% else %}success{% endif %}" style="min-width: 150px;">{% if persona.activo %}Desactivar paciente{% else %}Activar paciente{% endif %}</button>
		</form>
	</div>
	

	<div class="d-flex flex-wrap flex-row mb-3 lista justify-content-center">
	  <div class="p-2 paciente">
		<p class="titulo">Datos del paciente</p>
		<form method="POST" action="/perfil/{{persona.id}}" id="cargaDatos" style="visibility: hidden; position: absolute">
			{% csrf_token %}
			{{ form.as_p }}
			<button class="btn btn-outline-success" name="cargar">Cargar</button>
		</form>
		<fieldset disabled id="displayDatos">
			<div class="p-2">
				<label for="nacimiento" class="form-label">Nacimiento:</label>
				<div class="d-flex flex-row align-items-end"> 
					<input type="text" class="form-control w-50" value="{{ persona.nacimiento }}" id="nacimiento">
					<label class="form-label ms-3">{{ edadHoy }} años</label>
				</div>
			</div>
			<div class="p-2">
				<label for="dni" class="form-label">DNI:</label>
				<input type="text" class="form-control w-50" value="{{ persona.dni }}" id="dni">
			</div>
			<div class="d-flex flex-row"> 
				<div class="p-2">
					<label for="obra" class="form-label">Obra social:</label>
					<input type="text" class="form-control " value="{{ persona.obraSocial }}" id="obra">
				</div>
				<div class="p-2">
					<label for="afiliado" class="form-label">Número de afiliado:</label>
					<input type="text" class="form-control " value="{{ persona.afiliado }}" id="afiliado">
				</div>
			</div>
			<div class="d-flex flex-row"> 
				<div class="p-2">
					<label for="obra2" class="form-label">Obra social 2:</label>
					<input type="text" class="form-control " value="{{ persona.obraSocial2 }}" id="obra2">
				</div>
				<div class="p-2">
					<label for="afiliado2" class="form-label">Número de afiliado 2:</label>
					<input type="text" class="form-control " value="{{ persona.afiliado2 }}" id="afiliado2">
				</div>
			</div>
			
			<div class="d-flex flex-row"> 
				<div class="p-2">
					<label for="tel" class="form-label">Teléfono:</label>
					<input type="text" class="form-control " value="{{ persona.telefono }}" id="tel">
				</div>
				<div class="p-2">
					<label for="email" class="form-label">Email:</label>
					<input type="text" class="form-control " value="{{ persona.email }}" id="email">
				</div>
			</div>
			<div class="d-flex flex-row"> 
				<div class="p-2">
					<label for="localidad" class="form-label">Localidad:</label>
					<input type="text" class="form-control " value="{{ persona.localidad }}" id="localidad">
				</div>
				<div class="p-2">
					<label for="extra" class="form-label">Dato extra:</label>
					<input type="text" class="form-control " value="{{ persona.extras }}" id="extra">
				</div>
			</div>
		</fieldset>

		<button type="button" class="btn btn-outline-secondary float-end" placeholder="Copiar datos"></button>
	  </div>
	  <div class="p-2 paciente">
		<p class="titulo">Comentarios</p>
		<textarea class="form-control comentario" id="comentarios" data-id="{{ persona.id }}" aria-label="With textarea" placeholder="Tiene 2 chihuahuas y quiere hacer un negocio de criaderos">{{ persona.comentarios }}</textarea>
		<div class="d-flex justify-content-center"> 
			<button type="button" class="btn btn-outline-success mt-3" id="status" disabled style="min-width: 10em;"></button>
		</div>
	  </div>
	</div>


</div>

<h2 class="text-center">Historia clínica</h1>

<div class="d-flex flex-column mb-3 padre align-items-center">

	<div class="d-flex flex-row bd-highlight mb-3 botones justify-content-around">
		<button type="button" class="btn btn-outline-primary" id="statusEntrada" style="min-width: 150px;" disabled></button>
		<button type="button" class="btn btn-outline-secondary">Viendo nuevas primero <i class="las la-arrow-down"></i> <i class="las la-arrow-up"></i></button>
	</div>
	

	<div class="d-flex flex-column mb-3 lista align-items-center">
		<div class="p-2 entrada">
			<p class="titulo">Entrada de hoy: {{ diaHoy|date:"l, j F Y" }}</p>
			<textarea class="form-control detalle" id="entradaHoy" aria-label="With textarea" placeholder="Hoy el paciente se portó bien y le recetamos muchas pastillas">{{ entradaHoy }}</textarea>
		</div>
		{% for entrada in entradas %}
		<div class="p-2 entrada">
			<p class="titulo">{{ entrada.fecha }}</p>
			<textarea class="form-control detalle" aria-label="With textarea" placeholder="Vacia" disabled>{{ entrada.comentarios }}</textarea>
		</div>
        {% endfor %}
	  
	</div>

	<nav aria-label="Page navigation example" style="visibility: hidden;">
	  <ul class="pagination">
		<li class="page-item"><a class="page-link" href="#">Previous</a></li>
		<li class="page-item"><a class="page-link" href="#">1</a></li>
		<li class="page-item"><a class="page-link" href="#">2</a></li>
		<li class="page-item"><a class="page-link" href="#">3</a></li>
		<li class="page-item"><a class="page-link" href="#">Next</a></li>
	  </ul>
	</nav>

</div>

{% endblock %}